function initEquipManager(B,C){Ext.getDom("eq-content").innerTHML="";var D=new Ext.data.DWRJsonReader({totalProperty:"results",root:"rows"},new Ext.data.Record.create([{name:"id",mapping:"id"},{name:"no",mapping:"no"},{name:"name",mapping:"name"},{name:"model",mapping:"model"},{name:"admin",mapping:"admin"},{name:"company",mapping:"company"},{name:"counter",mapping:"counter"},{name:"type",mapping:"type"},{name:"charge",mapping:"charge"},{name:"status",mapping:"status"}]));var G=new Ext.data.GroupingStore({proxy:new Ext.data.DWRProxy({dwrFunction:Equip.getEquipsInfoByAdminType,listeners:{beforeload:function(J,K){K[J.loadArgsKey]=[K.start,K.limit]}}}),reader:D,groupField:"name",groupOnSort:true,sortInfo:{field:"type",direction:"ASC"}});var H=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),{header:"设备编号",width:100,sortable:true,dataIndex:"no"},{header:"设备名称",width:150,sortable:true,dataIndex:"name"},{header:"型号",width:150,sortable:true,dataIndex:"model"},{header:"负责人",width:100,sortable:true,dataIndex:"admin"},{header:"生产厂商",width:150,sortable:true,dataIndex:"company"},{header:"使用次数",width:80,sortable:true,dataIndex:"counter"},{header:"类别",width:100,sortable:true,dataIndex:"type",renderer:function(J){if(equipArray[J]){return equipArray[J]}else{return"其他"}}},{header:"是否收费",width:80,sortable:true,dataIndex:"charge",renderer:function(J){if(J){return"<span style='color:red;'>是</span>"}else{return"<span style='color:green;'>否</span>"}}},{header:"状态",width:100,sortable:true,dataIndex:"status",renderer:function(J){if(J){return"<span style='color:green;'>可用</span>"}else{return"<span style='color:red;'>暂不可用</span>"}}}]);var A=new Ext.grid.GridPanel({id:B,title:C,border:false,store:G,renderTo:"eq-content",header:false,cm:H,view:new Ext.grid.GroupingView({forceFit:true,sortAscText:"正序",sortDescText:"倒序",columnsText:"列显示/隐藏",groupByText:"依本列分组",showGroupsText:"分组显示",groupTextTpl:"{text} ({[values.rs.length]} 条记录)"}),loadMask:true,iconCls:"equip",closable:true,tbar:[{text:"刷新",tooltip:"刷新",iconCls:"refresh",onClick:function(){G.reload()}},"-",{text:"Tip:请选择一条设备记录鼠标右键菜单操作",xtype:"tbtext"}],bbar:new Ext.PagingToolbar({pageSize:pageSize,store:G,displayInfo:true})});G.load({params:{start:0,limit:pageSize}});var E=new Ext.menu.Menu({id:"equiprightClickCont",items:[{id:"equipDetailMenu",handler:I,iconCls:"detail",text:"查看/修改详情"},{id:"equipQueueMenu",handler:F,iconCls:"tabs",text:"预约列表"}]});A.addListener("rowcontextmenu",function(K,J,L){L.preventDefault();K.getSelectionModel().selectRow(J);E.showAt(L.getXY())});tabPanel.add(A).show();function F(){var J=A.getSelectionModel().getSelected();if(!J){return }var K=tabPanel.getItem("queue-equip");if(K){tabPanel.remove(K)}K=addQueueTab(J.data.id,J.data.name);tabPanel.setActiveTab(K)}function I(){var J=A.getSelectionModel().getSelected();if(!J){return }currentStore=G;showEquipEditWin(J.data.id)}};