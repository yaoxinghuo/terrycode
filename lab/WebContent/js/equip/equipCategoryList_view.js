function initEquipCategoryList(B,F){var J=parseInt(B.substr(17));Ext.getDom("eq-category-content"+J).innerTHML="";var K="";var D="name";var H=new Ext.data.DWRJsonReader({totalProperty:"results",root:"rows"},new Ext.data.Record.create([{name:"id",mapping:"id"},{name:"no",mapping:"no"},{name:"name",mapping:"name"},{name:"admin",mapping:"admin"},{name:"model",mapping:"model"},{name:"company",mapping:"company"},{name:"status",mapping:"status"},{name:"charge",mapping:"charge"},{name:"pub",mapping:"pub"}]));var N=new Ext.data.Store({proxy:new Ext.data.DWRProxy({dwrFunction:Equip.getEquipsInfoByType,listeners:{beforeload:function(P,Q){Q[P.loadArgsKey]=[Q.start,Q.limit,J,false]}}}),reader:H});var C=new Ext.grid.CheckboxSelectionModel();var M=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),C,{header:"设备编号",width:100,sortable:true,dataIndex:"no"},{header:"设备名称",width:150,sortable:true,dataIndex:"name"},{header:"型号",width:150,sortable:true,dataIndex:"model"},{header:"负责人",width:100,sortable:true,dataIndex:"admin"},{header:"生产厂商",width:150,sortable:true,dataIndex:"company"},{header:"是否公用",width:80,sortable:true,dataIndex:"pub",renderer:function(P){if(P){return"<span style='color:green;'>是</span>"}else{return"<span style='color:red;'>否</span>"}}},{header:"是否收费",width:80,sortable:true,dataIndex:"charge",renderer:function(P){if(P){return"<span style='color:red;'>是</span>"}else{return"<span style='color:green;'>否</span>"}}},{header:"状态",width:100,sortable:true,dataIndex:"status",renderer:function(P){if(P){return"<span style='color:green;'>接受预约</span>"}else{return"<span style='color:red;'>暂不可用</span>"}}}]);var G=new Ext.form.ComboBox({store:new Ext.data.SimpleStore({fields:["returnValue","displayValue"],data:equipColumns}),valueField:"returnValue",displayField:"displayValue",allowBlank:false,typeAhead:true,mode:"local",triggerAction:"all",value:"name",width:100,editable:false,selectOnFocus:true});var A=new Ext.grid.GridPanel({id:B,title:F,border:false,renderTo:"eq-category-content"+J,header:false,store:N,cm:M,sm:C,height:500,iconCls:"equip",loadMask:true,closable:true,tbar:[{text:"刷新",tooltip:"刷新",iconCls:"refresh",onClick:function(){N.reload()}},"-",{text:"Tip:请选择设备记录操作或单击记录的右键菜单",xtype:"tbtext"}],bbar:new Ext.PagingToolbar({pageSize:pageSize,store:N,displayInfo:true})});N.load({params:{start:0,limit:pageSize}});var I=new Ext.menu.Menu({id:"equipcategorylistrightClickCont",items:[{id:"equipcategorylistDetailMenu",handler:O,iconCls:"detail",text:"查看详情"}]});A.addListener("rowcontextmenu",function(Q,P,R){R.preventDefault();Q.getSelectionModel().selectRow(P);I.showAt(R.getXY())});tabPanel.add(A).show();function L(P){Ext.MessageBox.confirm("确认批量删除设备记录","是否确认批量删除设备记录？",function(Q){if("yes"!=Q){return }DWRUtil.useLoadingMessage("处理中...");Equip.batchRemoveEquip(P,{callback:function(S){cancelLoadingMessage();var R=Ext.decode(S);if(R.result){N.reload();showMsg(R.message)}else{Ext.Msg.alert("报告",R.message)}},errorHandler:function(R){Ext.Msg.alert("错误","对不起，程序出现错误!");cancelLoadingMessage()}})})}function E(){var P=A.getSelectionModel().getSelected();if(!P){return }Ext.MessageBox.confirm("确认删除设备记录","是否确认删除设备记录？",function(Q){if("yes"!=Q){return }DWRUtil.useLoadingMessage("处理中...");Equip.removeEquip(P.data.id,{callback:function(S){cancelLoadingMessage();var R=Ext.decode(S);if(R.result){N.remove(P);showMsg(R.message)}else{Ext.Msg.alert("报告",R.message)}},errorHandler:function(R){Ext.Msg.alert("错误","对不起，程序出现错误!");cancelLoadingMessage()}})})}function O(){var P=A.getSelectionModel().getSelected();if(!P){return }currentStore=N;showEditWin(P.data.id)}};