<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<script type="text/javascript" src="../js/jquery-1.2.6.min.js" ></script>
		<script type="text/javascript" src="jquery.blockUI.js" ></script>
		<script type="text/javascript" src="blockUI.js" ></script>
        <link rel="stylesheet" href="site.css" media="all" type="text/css" />
		<link rel="stylesheet" href="blockui.css" media="all" type="text/css" />
        <title>JQuery Block UI V2</title>
    </head>
    <body>



        <h2>JQuery Block UI V2</h2>
        <h3>概述</h3>
		<p>The jQuery BlockUI 插件是用于进行<abbr title="Asynchronous JavaScript and XML">AJAX</abbr>操作时模拟同步传输时锁定浏览器操作<sup>[1]</sup>。当它被激活时，它会阻止使用者与页面（或页面的一部分）进行交互，直至它被取消。
        BlockUI以在<abbr title="Document Object Model">DOM</abbr>中添加元素的方法来实现阻止用户与浏览器交互的外观和行为。</p>
        <p class="note">在翻译过程中，本人进行了测试。目前V2版本不能用于IE8测试版。</p>
        <p>
		这个插件的用法很简单。阻止用户与页面交互：
    </p><pre><code class="mix">$.blockUI();</code></pre>
        <p>
		自定义提示信息：
        </p>
        <pre><code class="mix">$.blockUI({ message: '&lt;h1&gt;&lt;img src="busy.gif" /&gt; Just a moment...&lt;/h1&gt;' });</code></pre>

        <p>
		自定义显示样式：
        </p>
        <pre><code class="mix">$.blockUI({ css: { backgroundColor: '#f00', color: '#fff'} });</code></pre>
        <p>解除对页面的锁定：
        </p>
        <pre><code class="mix">$.unblockUI();</code></pre>
        <p>
		如果要使用默认设置来同步所有的AJAX请求动作，代码如下：
        </p>
        <pre><code class="mix">$().ajaxStart($.blockUI).ajaxStop($.unblockUI);</code></pre>
        <p>[1] 以同步传输的方式来使用<code class="inline">XMLHttpRequest</code>对象会在请求结束前阻止用户与浏览器的交互，直到请求结束。通常情况下，这不是一种好的用户体验。
        </p>
		
		
		
		        <h3>锁定页面的例子</h3>        
		        <p>下面显示了几种锁定页面的方法。每个按钮都会激活blockUI并进行一次远程通信。</p>
                <p>
        <input id="pageDemo1" class="demo" value="默认信息" type="submit">
        <input id="pageDemo2" class="demo" value="自定义信息" type="submit">
        <input id="pageDemo3" class="demo" value="自定义样式" type="submit">
        <input id="pageDemo4" class="demo" value="显示DOM元素" type="submit">
        </p>
                <p>

        页面代码如下：
        </p>
                <pre><code class="mix">&lt;script type="text/javascript"&gt;

    // unblock when ajax activity stops
    $().ajaxStop($.unblockUI);

    function test() {
        $.ajax({ url: 'wait.php', cache: false });
    }

    $(document).ready(function() {
        $('#pageDemo1').click(function() {
            $.blockUI();
            test();
        });
        $('#pageDemo2').click(function() {
            $.blockUI({ message: '&lt;h1&gt;&lt;img src="busy.gif" /&gt; 请稍后...&lt;/h1&gt;' });
            test();
        });
        $('#pageDemo3').click(function() {
            $.blockUI({ css: { backgroundColor: '#f00', color: '#fff' } });
            test();
        });

        $('#pageDemo4').click(function() {
            $.blockUI({ message: $('#domMessage') });
            test();
        });
    });

&lt;/script&gt;

...


&lt;div id="domMessage" style="display:none;"&gt;
    &lt;h1&gt;正在处理，请稍侯...&lt;/h1&gt;
&lt;/div&gt;
</code></pre>

                <div id="domMessage" style="display: none;">
            <h1>正在处理，请稍侯...</h1>
        </div>
		
		
		
		
		<h3>锁定元素的例子</h3>
		<p>这里展示了如何锁定页面中的元素，而不是整个页面。
        请点击block/unblock按钮查看效果。</p>
		<p>
                <input id="blockButton" value="锁定" type="submit">
                <input id="blockButton2" value="锁定并显示信息" type="submit">
                <input id="unblockButton" value="解除锁定" type="submit">
    </p>

        <div class="blockMe">
            <p><a href="#" class="test">测试链接 - 请点击!</a>
            </p>
            <p>
            <select><option>Option 1</option><option>Option 2</option></select>
            lorem ipsum dolor sit amet
            consectetuer adipiscing elit
            sed lorem leo
            lorem leo consectetuer adipiscing elit
            sed lorem leo
            rhoncus sit amet
            <select><option>Option 1</option><option>Option 2</option></select>

            lorem ipsum dolor sit amet
            consectetuer adipiscing elit
            sed lorem leo
            <a href="#" class="test">测试链接 - 请点击!</a><br>
          
           
          <br/>
		   <textarea rows="2" cols="20">输入域测试</textarea>

    </p></div>
<div>
            <p>这段文字不会被锁定。
              <a href="#" class="test">测试链接 - 请点击!</a>

            </p>
</div>
        <p>
        下面是这个页面的代码：
        </p>
		<pre><code class="mix">&lt;script type="text/javascript"&gt;
    $(function() {
        $('#blockButton').click(function() {
            $('div.test').block({ message: null });
        });

        $('#blockButton2').click(function() {
            $('div.test').block({ 
                message: '&lt;h1&gt;处理中...&lt;/h1&gt;', 
                css: { border: '3px solid #a00' } 
            });
        });

        $('#unblockButton').click(function() {
            $('div.test').unblock();
        });

        $('a.test').click(function() {
            alert('link clicked');
            return false;
        });
    });
&lt;/script&gt;
</code></pre>




        <h3>简单的对话框示例</h3>
        <p>
		此页展示了如何显示一个简单的模拟对话框。以下按钮将激活<code class="inline">blockUI</code>显示一段自定义信息。这个AJAX请求将根据用户的反应（是或否）来发送或取消，在用户决定的这段时间内，会一直保持页面的锁定状态。
        </p>
        <p>
        <input id="showDialog" value="显示对话框" type="submit">

        </p><p>

        下面是这个页面的代码：
</p><pre><code class="mix">&lt;script type="text/javascript"&gt;
    $(function() {
        $('#test').click(function() {
            $.blockUI({ message: $('#question'), css: { width: '275px' } });
        });

        $('#yes').click(function() {
            // update the block message
            $.blockUI({ message: "&lt;h1&gt;正在进行通信...&lt;/h1&gt;" });

            $.ajax({
                url: 'wait.php',
                cache: false,
                complete: function() {
                    // unblock when remote call returns
                    $.unblockUI();
                }
            });
        });

        $('#no').click($.unblockUI);
    });
&lt;/script&gt;

...

&lt;input id="test" type="submit" value="显示对话框" /&gt;

...

&lt;div id="question" style="display:none; cursor: default"&gt;
        &lt;h1&gt;你确信要继续么？.&lt;/h1&gt;
        &lt;input type="button" id="确认" value="Yes" /&gt;
        &lt;input type="button" id="取消" value="No" /&gt;
&lt;/div&gt;
</code></pre>

        <p>
全功能的模拟对话框支持请访问 <a class="external" href="http://dev.iceburg.net/jquery/jqModal/">jqModal Plugin</a>，作者是Brice Burgess。

        </p>
        <div id="question" style="display: none; cursor: default;">
            <h1>你确信要继续么？</h1>
            <input id="yes" value="确认" type="button">
            <input id="no" value="取消" type="button">
        </div>

		
		
		    <h3>选项</h3>
		    <p>BlockUI的默认选项设置如下：
            </p>
		    <pre><code class="mix">// 可以使用以下代码来自定义行为和样式
$.blockUI.defaults = {
	//锁定时显示的提示信息(无提示信息时设置为null)
    message:  '&lt;h1&gt;Please wait...&lt;/h1&gt;',
    
    // 可以用CSS来格式化锁定时显示的信息
    // 如果你希望使用一个外部样式表，请使用一下代码
    // $.blockUI.defaults.css = {};
    css: { 
        padding:        0,
        margin:         0,
        width:          '30%', 
        top:            '40%', 
        left:           '35%', 
        textAlign:      'center', 
        color:          '#000', 
        border:         '3px solid #aaa',
        backgroundColor:'#fff'
    },
    
    // 设置遮罩层的样式
    overlayCSS:  { 
        backgroundColor:'#000', 
        opacity:        '0.6' 
    },
    
    // 允许在ie6中缩放body元素。这会使较短的页面看上去好一些
    // 如果你不想body元素的高度被改变，请设置为disable
    allowBodyStretch: true,
    
    // 默认情况下blockUI会禁止tab导航
    constrainTabKey: true,
    
    // fadeOut时间单位为毫秒。设为0的话，在解除锁定时不使用fadeout效果。 
    fadeOut:  400,
    
    // 禁止在FF/Linux上使用遮罩层样式(由于透明度的性能问题)
    applyPlatformOpacityRules: 1
};
</code></pre>
            <p>改变blockUI的设置非常简单，有2种方式：
            </p>
           <ul>
        <li>1、全局设置, 通过直接指定<code class="inline">$.blockUI.defaults</code>对象的值来设置。

        <li>2、局部设置, 将options对象放到 <code class="inline">blockUI</code>
            (或 <code class="inline">block</code>) 函数内部。
     </li></ul>
		
		
		
	    <h3>全局设置</h3>
		   <p>你可以通过直接的赋值来改变默认的选项。例如：
           </p>
		   <pre><code class="mix">// 改变提示信息的边框
$.blockUI.defaults.css.border = '5px solid red';

// 缩短fadeOut效果的时间
$.blockUI.defaults.fadeOut = 200;
</code></pre>



    <h3>局部设置</h3>
           <p>局部设置是将options对象放到 <code class="inline">blockUI</code>
            (或 <code class="inline">block</code>) 函数内部。这会强制使用局部设置来代替全局设置的值。例如:
           <pre><code class="mix">// 改变提示信息的边框
$.blockUI({ css: { border = '5px solid red'} });

...

// 缩短fadeOut效果的时间
$.blockUI({ fadeOut: 200 });

...

// 使用一个不同的提示信息
$.blockUI({ message: 'Hold on!' });
</code></pre>




    <h3>常见问题</h3>
           <dl>
        <dt>BlockUI插件需要那个jQuery版本的支持？</dt>
        <dd>BlockUI兼容jQuery v1.2.3以上的版本</dd>
        <dt>BlockUI插件的V2版本有那些变化？</dt>
        <dd>

        <ul>
            <li>解除锁定的时候，用于提示信息的元素不会从DOM中移除</li>
            <li>默认的遮罩层为黑色</li>
            <li>可用的选项设置进行了统一和清理</li>
            <li>设置插件选项的方法改变了</li>
            <li>放弃了对Opera 8的支持</li>
            <li>提高了源代码的可读性</li>
            <li>移除了<code>displayBox</code>功能
            (<a href="http://mjijackson.com/shadowbox/">其他 plugins</a>会做的更好)</li>
        </ul>
        </dd>
        <dt>我的原代码中的blockUI插件与新的2.00版兼容么？</dt>

        <dd>不兼容，如果原代码改变了blockUI的默认属性，那么会出现兼容问题。如何设置选项的语法发生了细微的改变。请查看<a href="#options">Options页</a>来了解新版本的选项设置方法。</dd>
        <dt>BlockUI插件还依赖于其他的插件么？ </dt>
        <dd>不依赖</dd>
        <dt>我如何使用外部样式表来格式化提示信息？</dt>
        <dd>请查看 <a href="http://transping.com/jQuery/blockUI/stylesheet.html">demo页</a>.</dd>

        <dt>我可以改变页面锁定时默认的提示信息么？</dt>
        <dd>可以。默认的提示信息储存在<code class="inline">$.blockUI.defaults.message</code>中。你可以以一个新的值来替换它，例如：
        <pre><code class="mix">$.blockUI.defaults.message = "Please be patient...";</code></pre>
        </dd>
        <dt>我能够改变遮罩层的颜色和透明度么？</dt>
        <dd>可以。默认的遮罩层样式储存在 <code class="inline">$.blockUI.defaults.overlayCSS</code>中。
		你可以指定一个不同的颜色和透明度，例如
        <pre><code class="mix">// 使用黄色遮罩层
$.blockUI.defaults.overlayCSS.backgroundColor = '#ff0';

// 使遮罩层更透明
$.blockUI.defaults.overlayCSS.opacity = '.2';

</code></pre>
        </dd>
        <dt>BlockUI支持Opera 8么？</dt>
        <dd>不支持</dd>
        <dt>在linux的FF上我为什么看不到遮罩层？</dt>
        <dd>有几个人告诉我，在FF/Linux上整个页面的透明度渲染慢的让人发疯，所以默认情况下，在这些平台上遮罩层不透明。你可以重设<code class="inline">applyPlatformOpacityRules</code>值来启用透明度。
        例如:
        <pre><code class="mix">// 在FF/Linux下启用遮罩层透明
$.blockUI.defaults.applyPlatformOpacityRules = false;</code></pre>

        </dd>
        </dl>
		
		
		
	     <h3>下载</h3>
		   <p>新版本的blockUI v2.00可以在这里得到:
             <a href="http://malsup.com/jquery/block/jquery.blockUI.js">jquery.blockUI.js</a>.
           </p>
		   
	    <h3>支持</h3>
		   <p>BlockUI插件的支持请访问
             <a class="external" href="http://groups.google.com/group/jquery-en">jQuery Google Group</a>.
           </p>
		  <div class="footer">
            <p>BlockUI插件和文档由Mike Alsup制作完成。
        意见或建议请发送至 jquery @ malsup . com.
            </p>
			<p>中文化： <a href="http://www.transping.com/">transping.com</a>
            </p>


	    </div>
    </body>
</html>
