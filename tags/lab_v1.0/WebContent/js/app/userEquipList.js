function initUserEquipList(C){var D=null;storeArray[C]=new Ext.data.Store({proxy:new Ext.data.DWRProxy({dwrFunction:Equip.getEquipsInfoByType,listeners:{beforeload:function(I,J){J[I.loadArgsKey]=[J.start,J.limit,C,true]}}}),reader:reader});var H=new Ext.grid.CheckboxSelectionModel();var A=new Ext.grid.ColumnModel([new Ext.grid.RowNumberer(),{header:"设备编号",width:130,sortable:true,dataIndex:"no"},{header:"设备名称",width:150,sortable:true,dataIndex:"name",renderer:function(K,J,I){return"<span class='nounderline'><a href=# onclick=\"showDetailWin('"+I.data.id+"','"+I.data.name+"','"+I.data.appd+"','"+I.data.appt1+"','"+I.data.appt2+"',"+I.data.status+');return false;">'+K+"</a></span>"}},{header:"型号",width:120,sortable:true,dataIndex:"model"},{header:"负责人",width:100,sortable:true,dataIndex:"admin"},{header:"生产厂商",width:150,sortable:true,dataIndex:"company"},{header:"预约次数",width:60,sortable:true,dataIndex:"counter"},{header:"分类",width:100,sortable:true,dataIndex:"type",renderer:function(I){return equipArray[I]}},{header:"是否收费",hidden:true,width:60,sortable:true,dataIndex:"charge",renderer:function(I){if(I){return"<span style='color:red;'>是</span>"}else{return"<span style='color:green;'>否</span>"}}},{header:"状态",width:100,sortable:true,dataIndex:"status",renderer:function(K,J,I){if(K){return"<span class='nounderline'><a href='javascript:;' onclick=\"showBookWin('"+I.data.id+"','"+I.data.name+"','"+I.data.appd+"','"+I.data.appt1+"','"+I.data.appt2+"',"+I.data.status+');">接受预约</a></span>'}else{return"<span style='color:red;'>暂不可用</span>"}}}]);D=new Ext.grid.GridPanel({id:"_tab_grid_"+C,store:storeArray[C],border:false,cm:A,height:500,title:(C==0)?"常用设备":equipArray[C],iconCls:(C==0)?"normal":"equip",loadMask:true,listeners:{rowcontextmenu:{fn:function(J,I,K){K.preventDefault();J.getSelectionModel().selectRow(I);G.showAt(K.getXY())},scope:this},rowdblclick:{fn:function(J,I,K){B()},scope:this}},tbar:[{text:"刷新",tooltip:"刷新",iconCls:"refresh",onClick:function(){equipRefresh(C)}},"-",{text:"Tip:请选择一条记录双击编辑预约或按鼠标右键菜单操作",xtype:"tbtext"}],bbar:new Ext.PagingToolbar({pageSize:pageSize,store:storeArray[C],displayInfo:true})});var G=new Ext.menu.Menu({id:"userequiplistrightClickCont"+C,items:[{id:"userequiplistBookMenu"+C,handler:B,iconCls:"yuyue",text:"预约该设备"},{id:"userequiplistQueueMenu"+C,handler:F,iconCls:"tabs",text:"设备预约列表"},{id:"userequiplistDetailMenu"+C,handler:E,iconCls:"detail",text:"查看设备详情"}]});tabPanel.add(D);function B(){var I=D.getSelectionModel().getSelected();if(!I){return }else{showBookWin(I.data.id,I.data.name,I.data.appd,I.data.appt1,I.data.appt2,I.data.status)}}function F(){if(!islogin){showMsg("该操作需要<a href='#' onclick='showLoginWin();return false;'>登录</a>后才能继续！");return }var I=D.getSelectionModel().getSelected();if(!I){return }var J=tabPanel.getItem("queue-eq-content");if(J){tabPanel.remove(J)}J=addQueueTab(I.data.id,I.data.name);tabPanel.setActiveTab(J)}function E(){var I=D.getSelectionModel().getSelected();if(!I){return }showDetailWin(I.data.id,I.data.name,I.data.appd,I.data.appt1,I.data.appt2)}};